<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: ; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <title>YRGN22 STORE - Offline Mode</title>
  <style>
    /* --- 1. RESET & BASIC --- */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- 2. STICKY NAV --- */
    .sticky-nav {
      position: sticky;
      top: 0;
      z-index: 1000;
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      padding-bottom: 10px;
    }

    header {
      background: #2c3e50;
      color: white;
      padding: 15px 5%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    header img {
      height: 45px;
      width: auto;
    }

    .brand-outline {
      border: 2px solid rgba(255,255,255,0.8);
      padding: 5px 15px;
      border-radius: 8px;
    }

    .store-title {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 1px;
      text-align: center;
      flex-grow: 1;
    }

    /* --- CONTROLS --- */
    .controls {
      padding: 15px 20px 5px 20px;
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .controls input, .controls select {
      padding: 12px 20px;
      font-size: 15px;
      border-radius: 50px;
      border: 1px solid #e0e0e0;
      outline: none;
      transition: all 0.3s;
      background: #f9f9f9;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.03);
    }

    .controls input { width: 320px; }
    
    .controls input:focus, .controls select:focus {
      border-color: #3498db;
      background: #fff;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
    }

    /* --- CONTAINER --- */
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      padding: 40px 20px;
      max-width: 1280px;
      margin: 0 auto;
    }

    /* --- 3. PRODUCT CARD (CLEAN) --- */
    .product-card {
      background: #ffffff;
      width: 280px;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.05);
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      border: 1px solid #f0f0f0;
    }

    .product-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 35px rgba(0,0,0,0.12);
      border-color: #3498db;
    }

    .img-wrapper {
      width: 100%;
      height: 220px;
      overflow: hidden;
    }

    .product-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .product-card:hover img {
      transform: scale(1.12);
    }

    .product-info {
      padding: 20px;
      background: white;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    .category-text {
      font-size: 11px;
      color: #95a5a6;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .product-info h3 {
      margin: 0 0 15px 0;
      font-size: 17px;
      color: #2c3e50;
      font-weight: 700;
      line-height: 1.4;
    }

    .price-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: auto;
      border-top: 1px solid #f5f5f5;
      padding-top: 15px;
    }

    .price {
      font-size: 18px;
      color: #27ae60;
      font-weight: 800;
      margin: 0;
    }

    .action-btn {
      background: #f0f2f5;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #2c3e50;
      transition: all 0.3s;
      font-size: 14px;
    }
    .product-card:hover .action-btn {
      background: #2c3e50;
      color: white;
    }

    /* --- PAGINATION --- */
    .pagination-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 20px;
      margin-bottom: 40px;
      flex: 1;
    }

    .page-btn {
      background: white;
      border: 1px solid #eee;
      color: #555;
      padding: 10px 18px;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s;
      font-weight: 600;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .page-btn:hover {
      background: #f8f9fa;
      transform: translateY(-2px);
    }

    .page-btn.active {
      background: #2c3e50;
      color: white;
      border-color: #2c3e50;
    }

    .page-btn:disabled {
      background: #f0f0f0;
      color: #bbb;
      cursor: not-allowed;
    }

    /* --- MODAL (POP UP) --- */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      backdrop-filter: blur(5px);
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
    }

    .modal-content {
      background-color: #fff;
      border-radius: 20px;
      width: 100%;
      max-width: 450px;
      max-height: 90vh; 
      overflow-y: auto; 
      padding: 30px;
      position: relative;
      box-shadow: 0 25px 50px rgba(0,0,0,0.25);
      animation: zoomIn 0.3s;
    }

    @keyframes zoomIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    .modal-content img {
      width: 100%;
      height: auto;
      max-height: 300px;
      object-fit: contain;
      background-color: #f8f9fa;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #eee;
    }

    .modal-content h2 { margin: 0 0 10px 0; font-size: 22px; }
    .modal-content p { margin: 5px 0; }

    .close {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 32px;
      color: #bbb;
      cursor: pointer;
      line-height: 1;
      z-index: 10;
    }
    .close:hover { color: #e74c3c; }

    .select-box {
      width: 100%;
      padding: 12px;
      margin: 8px 0 15px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f9f9f9;
    }

    .buy-btn {
      display: block;
      width: 100%;
      box-sizing: border-box;
      margin-top: 25px;
      padding: 15px;
      background: #25D366;
      color: white;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      transition: background 0.3s;
      box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
    }
    .buy-btn:hover {
      background: #128C7E;
    }

    /* --- FOOTER --- */
    .site-footer {
      background-color: #2c3e50;
      color: rgba(255,255,255,0.7);
      text-align: center;
      padding: 30px 20px;
      font-size: 14px;
      margin-top: auto;
    }

    /* --- RESPONSIVE --- */
    @media screen and (max-width: 600px) {
      .sticky-nav {
        padding: 10px 0;
      }

      header {
        padding: 10px 15px;
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }

      .logo-container {
        justify-content: center;
        order: 1;
      }

      .store-title {
        order: 2;
        font-size: 22px;
        text-align: center;
        width: 100%;
        margin: 0;
        padding: 0;
      }

      .controls input, .controls select { width: 100%; }
      .product-card { width: 100%; }
      .container { padding: 20px; }

      .modal-content {
        padding: 20px;
        width: 95%;
        max-height: 90vh;
      }

      .modal-content img {
        max-height: 200px;
        object-fit: contain;
        margin-bottom: 15px;
      }

      .modal-content h2 { font-size: 18px; }
      #modalPrice { font-size: 18px !important; }
      #modalDesc { font-size: 13px !important; }

      .select-box { padding: 8px; margin: 5px 0 10px 0; font-size: 14px; }
      label { font-size: 13px; }
      .buy-btn { margin-top: 15px; padding: 12px; }
      .close { top: 10px; right: 15px; font-size: 28px; }
    }
  </style>
</head>
<body oncontextmenu="return false">

  <div class="sticky-nav">
    <header>
      <div class="logo-container">
        <img src="Logo/Logo Yrgn copy.png" alt="Logo" onerror="this.style.display='none'">
      </div>
      <h1 class="store-title brand-outline">YR STORE</h1>
    </header>

    <div class="controls">
      <input type="text" id="searchInput" onkeyup="updateFilter()" placeholder="üîç Cari nama produk...">
      <select id="categorySelect" onchange="updateFilter()">
        <option value="all">üìÇ Semua Kategori</option>
        <option value="Pakaian">üëï Pakaian</option>
        <option value="Sepatu">üëü Sepatu</option>
        <option value="Tumbler">üçæ Tumbler</option>
      </select>
    </div>
  </div>

  <div class="container" id="productContainer">

    <!-- Produk Bawaan (Tetap Ada) -->
    <div class="product-card" data-name="Kaos Polos" data-category="Pakaian" onclick="openModal('Kaos Polos','Rp 75.000','Bahan Cotton Combed 30s adem.',{'Hitam':'Barang/Hitam.png','Putih':'Barang/Putih.png'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Kaos+Polos  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Kaos Polos Premium</h3>
        <div class="price-row"><p class="price">Rp 75.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Sepatu Sneakers" data-category="Sepatu" onclick="openModal('Sepatu Sneakers','Rp 250.000','Sneakers kekinian.',{'Hitam':'Barang/celana.jpg','Putih':'Barang/Putih.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/celana.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Sneakers  '"></div>
      <div class="product-info">
        <span class="category-text">Sepatu</span>
        <h3>Sepatu Sneakers</h3>
        <div class="price-row"><p class="price">Rp 250.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Sepatu Sport" data-category="Sepatu" onclick="openModal('Sepatu Sport','Rp 300.000','Cocok untuk lari.',{'Biru':'Barang/Biru.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/celana.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Sepatu+Sport  '"></div>
      <div class="product-info">
        <span class="category-text">Sepatu</span>
        <h3>Sepatu Sport Run</h3>
        <div class="price-row"><p class="price">Rp 300.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Kemeja Flanel" data-category="Pakaian" onclick="openModal('Kemeja Flanel','Rp 150.000','Motif kotak-kotak.',{'Merah':'Barang/Merah.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Flanel  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Kemeja Flanel</h3>
        <div class="price-row"><p class="price">Rp 150.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Jaket Denim" data-category="Pakaian" onclick="openModal('Jaket Denim','Rp 200.000','Bahan Jeans Tebal.',{'Biru':'Barang/Biru.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Jaket+Denim  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Jaket Denim Classic</h3>
        <div class="price-row"><p class="price">Rp 200.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Topi Baseball" data-category="Pakaian" onclick="openModal('Topi Baseball','Rp 50.000','All size.',{'Hitam':'Barang/Hitam.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Topi  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Topi Baseball NY</h3>
        <div class="price-row"><p class="price">Rp 50.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Sepatu Formal" data-category="Sepatu" onclick="openModal('Sepatu Formal','Rp 400.000','Kulit asli.',{'Coklat':'Barang/Coklat.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/celana.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Pantofel  '"></div>
      <div class="product-info">
        <span class="category-text">Sepatu</span>
        <h3>Sepatu Formal Pantofel</h3>
        <div class="price-row"><p class="price">Rp 400.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Kaos Oversize" data-category="Pakaian" onclick="openModal('Kaos Oversize','Rp 85.000','Potongan longgar.',{'Putih':'Barang/Putih.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Oversize  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Kaos Oversize Street</h3>
        <div class="price-row"><p class="price">Rp 85.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Celana Chino" data-category="Pakaian" onclick="openModal('Celana Chino','Rp 120.000','Bahan stretch.',{'Krem':'Barang/Krem.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Chino  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Celana Chino Slim</h3>
        <div class="price-row"><p class="price">Rp 120.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Sepatu Sandal" data-category="Sepatu" onclick="openModal('Sepatu Sandal','Rp 90.000','Sandal gunung kuat.',{'Hitam':'Barang/Hitam.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/celana.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Sandal  '"></div>
      <div class="product-info">
        <span class="category-text">Sepatu</span>
        <h3>Sepatu Sandal Outdoor</h3>
        <div class="price-row"><p class="price">Rp 90.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Hoodie Polos" data-category="Pakaian" onclick="openModal('Hoodie Polos','Rp 175.000','Fleece tebal.',{'Abu':'Barang/Abu.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Hoodie  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Hoodie Jumper Polos</h3>
        <div class="price-row"><p class="price">Rp 175.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Vest Rajut" data-category="Pakaian" onclick="openModal('Vest Rajut','Rp 60.000','Korean style.',{'Krem':'Barang/Krem.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Vest  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Vest Rajut Korea</h3>
        <div class="price-row"><p class="price">Rp 60.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Celana Jeans" data-category="Pakaian" onclick="openModal('Celana Jeans','Rp 180.000','Slim fit.',{'Biru':'Barang/Biru.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Jeans  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Celana Jeans Pria</h3>
        <div class="price-row"><p class="price">Rp 180.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Topi Kupluk" data-category="Pakaian" onclick="openModal('Topi Kupluk','Rp 45.000','Hangat dipakai.',{'Hitam':'Barang/Hitam.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Kupluk  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Topi Kupluk Beanie</h3>
        <div class="price-row"><p class="price">Rp 45.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Sepatu Boots" data-category="Sepatu" onclick="openModal('Sepatu Boots','Rp 350.000','Kulit sintetis.',{'Coklat':'Barang/Coklat.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/celana.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Boots  '"></div>
      <div class="product-info">
        <span class="category-text">Sepatu</span>
        <h3>Sepatu Boots Klasik</h3>
        <div class="price-row"><p class="price">Rp 350.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

    <div class="product-card" data-name="Jaket Bomber" data-category="Pakaian" onclick="openModal('Jaket Bomber','Rp 220.000','Anti angin.',{'Hijau':'Barang/Hijau.jpg'},'')">
      <div class="img-wrapper"><img src="Barang/baju.jpg" onerror="this.src='https://via.placeholder.com/300x250?text=Bomber  '"></div>
      <div class="product-info">
        <span class="category-text">Pakaian</span>
        <h3>Jaket Bomber Army</h3>
        <div class="price-row"><p class="price">Rp 220.000</p><div class="action-btn">‚ûî</div></div>
      </div>
    </div>

  </div>

  <div class="pagination-container" id="paginationControls"></div>

  <!-- MODAL PRODUK -->
  <div id="productModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modalImage" src="" alt="Produk">
      <h2 id="modalName"></h2>
      <p id="modalPrice" style="color:#27ae60; font-weight:bold; font-size:20px;"></p>
      <p id="modalDesc" style="color:#666; font-size:14px; line-height:1.5;"></p>
      
      <div style="text-align:left; margin-top:20px;">
        <label>Pilih Warna:</label>
        <select id="colorSelect" class="select-box"></select>
        <label>Pilih Ukuran:</label>
        <select id="sizeSelect" class="select-box">
          <option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option>
        </select>
      </div>

      <p id="confirmationText" style="margin:15px 0; font-size:13px; color:#555; background:#f0f2f5; padding:10px; border-radius:8px;"></p>
      <a id="modalBuy" class="buy-btn" href="#" target="_blank" rel="noopener noreferrer">Ôà≤ Beli via WhatsApp</a>
    </div>
  </div>

  <footer class="site-footer">
    <div class="footer-content">
      <p>¬© <span id="year"></span> RIAN KIA MADO</p>
    </div>
  </footer>

<script>
  // 1. Update Tahun Otomatis di Footer
  document.getElementById("year").textContent = new Date().getFullYear();

  // [KEAMANAN] Blokir Tombol Developer Tools
  document.onkeydown = function(e) {
    if(event.keyCode == 123) { return false; }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { return false; }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) { return false; } 
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) { return false; } 
    if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { return false; }
  }

  // 2. Konfigurasi Halaman (Pagination)
  const ITEMS_PER_PAGE = 12; 
  let currentPage = 1;
  let filteredProducts = []; 
  
  const allProductElements = Array.from(document.getElementsByClassName("product-card"));

  window.onload = function() {
    updateFilter(); 
  };

  function sanitizeInput(str) {
    const temp = document.createElement('div');
    temp.textContent = str;
    return temp.innerHTML;
  }

  function updateFilter() {
    let rawInput = document.getElementById("searchInput").value;
    const searchInput = sanitizeInput(rawInput).toLowerCase();
    const categorySelect = document.getElementById("categorySelect").value;

    filteredProducts = allProductElements.filter(card => {
      const name = card.getAttribute("data-name").toLowerCase();
      const category = card.getAttribute("data-category");
      const matchSearch = name.includes(searchInput);
      const matchCategory = categorySelect === "all" || category === categorySelect;
      return matchSearch && matchCategory;
    });

    currentPage = 1;
    renderPagination();
  }

  function renderPagination() {
    const totalItems = filteredProducts.length;
    const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

    allProductElements.forEach(el => el.style.display = "none");

    const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
    const endIndex = startIndex + ITEMS_PER_PAGE;
    const itemsToShow = filteredProducts.slice(startIndex, endIndex);

    itemsToShow.forEach(el => el.style.display = "flex");

    const paginationContainer = document.getElementById("paginationControls");
    paginationContainer.innerHTML = ""; 

    if (totalPages > 1) {
      const prevBtn = document.createElement("button");
      prevBtn.innerText = "¬´ Prev";
      prevBtn.className = "page-btn";
      prevBtn.disabled = currentPage === 1;
      prevBtn.onclick = () => changePage(currentPage - 1);
      paginationContainer.appendChild(prevBtn);

      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement("button");
        btn.innerText = i;
        btn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
        btn.onclick = () => changePage(i);
        paginationContainer.appendChild(btn);
      }

      const nextBtn = document.createElement("button");
      nextBtn.innerText = "Next ¬ª";
      nextBtn.className = "page-btn";
      nextBtn.disabled = currentPage === totalPages;
      nextBtn.onclick = () => changePage(currentPage + 1);
      paginationContainer.appendChild(nextBtn);
    }
    
    if (totalItems === 0) {
      paginationContainer.innerHTML = "<p style='color:#999; font-style:italic;'>Produk tidak ditemukan.</p>";
    }
  }

  function changePage(pageNum) {
    currentPage = pageNum;
    renderPagination();
    window.scrollTo({ top: 0, behavior: 'smooth' }); 
  }

  // 3. FUNGSI MODAL PRODUK
  function openModal(name, price, desc, images, linkBase) {
    document.getElementById("modalName").innerText = name;
    document.getElementById("modalPrice").innerText = price;
    document.getElementById("modalDesc").innerText = desc;

    const colorSelect = document.getElementById("colorSelect");
    colorSelect.innerHTML = "";
    Object.keys(images).forEach(color => {
      const option = document.createElement("option");
      option.value = color;
      option.text = color;
      colorSelect.appendChild(option);
    });
    
    if(Object.keys(images).length > 0) colorSelect.value = Object.keys(images)[0];

    function updatePreview() {
      const color = colorSelect.value;
      const size = document.getElementById("sizeSelect").value;
      const imageUrl = images[color] || 'https://via.placeholder.com/300  ';
      document.getElementById("modalImage").src = imageUrl;
      document.getElementById("confirmationText").innerText = `Pilihan: Warna ${color}, Ukuran ${size}`;
      
      let finalLink = linkBase ? linkBase : "https://wa.me/6282223108015?text=  ";
      if(!finalLink.includes("text=")) finalLink += "&text=";
      const message = `Halo Admin YR STORE,\nSaya tertarik membeli:\n------------------\nNama: ${name}\nHarga: ${price}\nWarna: ${color}\nUkuran: ${size}\n------------------\nMohon info stok dan ongkir.`;
      document.getElementById("modalBuy").href = finalLink + encodeURIComponent(message);
    }

    colorSelect.onchange = updatePreview;
    document.getElementById("sizeSelect").onchange = updatePreview;
    updatePreview();
    document.getElementById("productModal").style.display = "flex";
  }

  function closeModal() {
    document.getElementById("productModal").style.display = "none";
  }
  
  window.onclick = function(event) {
    if (event.target == document.getElementById("productModal")) closeModal();
  }
</script>
</body>
</html>